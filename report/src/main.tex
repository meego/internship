%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode

\documentclass[twoside]{report}


%% LANGUAGE (english by default)
\def\mlanguage french % TODO: remove this and use a cli parameter
\usepackage{iflang}
\ifx\mlanguage\undefined
  \usepackage[frenchb, english]{babel}
  \selectlanguage{english}
\else
  \usepackage[english, frenchb]{babel}
  \selectlanguage{frenchb}
\fi
\newcommand{\ifr}[2]{\iflanguage{frenchb}{#1}{#2}}

%% PACKAGES %%
\usepackage[top=2cm,bottom=2cm,left=3cm,right=3cm]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{url}
\usepackage{pdfpages}
\usepackage{graphicx}
\usepackage{lscape}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{sectsty}
\usepackage{placeins}
\usepackage{amsmath,amsfonts,amsthm}
\usepackage[hidelinks]{hyperref}
\usepackage[official]{eurosym}
\usepackage{fancyhdr}
\usepackage[sort&compress, authoryear]{natbib}

\usepackage{paralist} %% enumerate several elements on a single line like (i)
%% this is an example, (ii) this is a second example

%% TITLE PAGE
\title{
\normalfont \normalsize
\textsc{Université Pierre et Marie Curie} \\ [25pt]
\horrule{0.5pt} \\[0.4cm]
\huge Pré-rapport de stage\\
\horrule{2pt} \\[0.5cm]
}
\author{Pierre-Yves PÉNEAU}
\date{\normalsize\today}

%% HEADER / FOOTER
\pagestyle{plain}
\fancyhead{}
\fancyfoot{}
\fancyfoot[RO, LE] {\thepage}

\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}

\fancyhead[CO,CE]{Pré-rapport de stage}
\fancyhead[LH]{Université Pierre et Marie Curie}
\fancyhead[RH]{Pierre-Yves Péneau}
\fancyfoot[C]{Draft version}
\fancyfoot[RO, LE] {\thepage}

%% COMMANDS
\newcommand{\todo}[1]{\textbf{\color{red}TODO: #1\newline}}
\newcommand{\benumline}{\begin{inparaenum}[\itshape i\upshape)]}
\newcommand{\eenumline}{\end{inparaenum}}
\setlength\parindent{0pt}
\titleformat{\chapter}[hang]{\bf\huge}{\thechapter}{2pc}{}
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\bibpunct{[}{]}{;}{n}{,}{,}
%% 1/ The symbol for the opening bracket.
%% 2/ The symbol for the closing bracket.

%% 3/ The symbol that appears between multiple citations.
%%      This argument takes a letter:
%%       n - numerical style.
%%       s - numerical superscript style.
%%       any other letter - author-year style.

%% 4/ The punctuation to appear between the author and the year (in
%% parenthetical case only).

%% 5/ The punctuation used between years, in multiple citations when there is a
%% common author. e.g., (Chomsky 1956, 1957). If you want an extra space, then
%% you need {,~}.

\begin{document}

  \maketitle
  \tableofcontents
  \onehalfspacing
 
  \ifr{ %% FRENCH PART HERE
    \input{src/introduction-fr}
    \input{src/chapter1-fr}
  }
  {
    %% ENGLISH PART HERE
  }
  
  \bibliographystyle{plainnat}
  \bibliography{src/references}
  \ifr {\addcontentsline{toc}{chapter}{Bibliographie}}
       {\addcontentsline{toc}{chapter}{References}}

\end{document}
