<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="3728pt" style="width:3709px;height:3728px;" version="1.1" viewBox="0 0 3709 3728" width="3709pt"><defs><filter height="300%" id="f1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="928" y="1007.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="935" y="1027.1436">task_fd_init</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="1271.5" y="1484.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="1278.5" y="1504.5654">task_dup</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1641" y="1713.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1648" y="1733.5264">task_fd_fork</text><rect fill="#FFFFFF" filter="url(#f1)" height="188.9297" style="stroke: #000000; stroke-width: 2.0;" width="329" x="1631" y="1823.0938"/><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1912.5" y="2214.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1919.5" y="2234.5498">vmm_dup</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="2219" y="2431.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="2226" y="2451.6436">vmm_init</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="2512" y="2590.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="2519" y="2610.3389">pmm_init</text><rect fill="#FFFFFF" filter="url(#f1)" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="280" x="2502" y="2730.1719"/><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="2861.5" y="2906.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="2868.5" y="2926.667">thread_dup</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="3401.5" y="3321.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="3408.5" y="3341.4248">sched_register</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="23" x2="23" y1="86.2969" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="85" x2="85" y1="86.2969" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="340.5" x2="340.5" y1="86.2969" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="702" x2="702" y1="86.2969" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="975" x2="975" y1="1039.7969" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1311.5" x2="1311.5" y1="1517.2188" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1691" x2="1691" y1="1746.1797" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1954.5" x2="1954.5" y1="2247.2031" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2258" x2="2258" y1="2464.2969" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2552" x2="2552" y1="2622.9922" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2909.5" x2="2909.5" y1="2932.2695" y2="3644.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3461.5" x2="3461.5" y1="3354.0781" y2="3644.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="8.5" y="82.9951">libc</text><ellipse cx="23" cy="13" fill="#FEFECE" filter="url(#f1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M23,21 L23,48 M10,29 L36,29 M23,48 L10,63 M23,48 L36,63 " fill="#FEFECE" filter="url(#f1)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="8.5" y="3656.5186">libc</text><ellipse cx="23" cy="3669.8203" fill="#FEFECE" filter="url(#f1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M23,3677.8203 L23,3704.8203 M10,3685.8203 L36,3685.8203 M23,3704.8203 L10,3719.8203 M23,3704.8203 L36,3719.8203 " fill="#FEFECE" filter="url(#f1)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="48" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="55" y="70.9951">sys_fork</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="48" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="55" y="3663.5186">sys_fork</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="306.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="313.5" y="70.9951">do_fork</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="306.5" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="313.5" y="3663.5186">do_fork</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="653" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="660" y="70.9951">task_create</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="653" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="660" y="3663.5186">task_create</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="928" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="935" y="3663.5186">task_fd_init</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="1271.5" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="1278.5" y="3663.5186">task_dup</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1641" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1648" y="3663.5186">task_fd_fork</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1912.5" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1919.5" y="3663.5186">vmm_dup</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="2219" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="2226" y="3663.5186">vmm_init</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="2512" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="2519" y="3663.5186">pmm_init</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="2861.5" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="2868.5" y="3663.5186">thread_dup</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="3401.5" y="3643.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="3408.5" y="3663.5186">sched_register</text><polygon fill="#A80036" points="73,113.2969,83,117.2969,73,121.2969,77,117.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23" x2="79" y1="117.2969" y2="117.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="30" y="112.3638">fork()</text><rect fill="#EEEEEE" filter="url(#f1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3701" x="3" y="170.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="170.9961" y2="170.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="173.9961" y2="173.9961"/><rect fill="#EEEEEE" filter="url(#f1)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="108" x="1799.5" y="160.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="1805.5" y="176.4966">Initialisation</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="229.8281" y2="229.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="229.8281" y2="242.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="242.8281" y2="242.8281"/><polygon fill="#A80036" points="96,238.8281,86,242.8281,96,246.8281,92,242.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="92" y="209.6294">ajout de 1 dans le compteur</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="92" y="224.7622">de fils de la tâche appelante</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="271.9609" y2="271.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="271.9609" y2="284.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="284.9609" y2="284.9609"/><polygon fill="#A80036" points="96,280.9609,86,284.9609,96,288.9609,92,284.9609" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="92" y="266.895">remplissage de la struct fd_info</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="329.2266" y2="329.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="329.2266" y2="342.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="342.2266" y2="342.2266"/><polygon fill="#A80036" points="96,338.2266,86,342.2266,96,346.2266,92,342.2266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="92" y="309.0278">désactivation et réactivation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="92" y="324.1606">immédiate des IRQ (TODO: find why)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="386.4922" y2="386.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="386.4922" y2="399.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="399.4922" y2="399.4922"/><polygon fill="#A80036" points="96,395.4922,86,399.4922,96,403.4922,92,399.4922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="92" y="366.2935">sauvegarde du contexte du FPU</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="92" y="381.4263">(voir la remarque sur le FPU)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="443.7578" y2="443.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="443.7578" y2="456.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="456.7578" y2="456.7578"/><polygon fill="#A80036" points="96,452.7578,86,456.7578,96,460.7578,92,456.7578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="92" y="423.5591">on applique la politique de placement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="92" y="438.6919">par défaut (cluster+1, cpu+1)</text><rect fill="#EEEEEE" filter="url(#f1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3701" x="3" y="510.3242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="510.3242" y2="510.3242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="513.3242" y2="513.3242"/><rect fill="#EEEEEE" filter="url(#f1)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="173" x="1767" y="499.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1773" y="515.8247">Copie des structures</text><polygon fill="#A80036" points="329,549.8906,339,553.8906,329,557.8906,333,553.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="335" y1="553.8906" y2="553.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="92" y="548.9575">do_fork(struct fork_info *info)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="583.1563" y2="583.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="583.1563" y2="596.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="596.1563" y2="596.1563"/><polygon fill="#A80036" points="352,592.1563,342,596.1563,352,600.1563,348,596.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="348" y="578.0903">on créé la variable child_task</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="640.4219" y2="640.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="640.4219" y2="653.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="653.4219" y2="653.4219"/><polygon fill="#A80036" points="352,649.4219,342,653.4219,352,657.4219,348,653.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="348" y="620.2231">on récupère l'id du cluster et</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="348" y="635.356">du cpu choisi</text><polygon fill="#A80036" points="690,708.4219,700,712.4219,690,716.4219,694,712.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="696" y1="712.4219" y2="712.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="348" y="677.4888">task_create(struct task_s *chil_task,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="348" y="692.6216">struct fork_info *info,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="348" y="707.7544">CPU_USR_MODE)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="757.0859" y2="757.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="757.0859" y2="770.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="770.0859" y2="770.0859"/><polygon fill="#A80036" points="713,766.0859,703,770.0859,713,774.0859,709,770.0859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="709" y="736.8872">on vérifie qu'on créé bien</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="709" y="752.02">un thread utilisateur</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="814.3516" y2="814.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="814.3516" y2="827.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="827.3516" y2="827.3516"/><polygon fill="#A80036" points="713,823.3516,703,827.3516,713,831.3516,709,827.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="709" y="794.1528">on cherche un pid pour la</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="709" y="809.2856">nouvelle tâche</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="871.6172" y2="871.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="871.6172" y2="884.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="884.6172" y2="884.6172"/><polygon fill="#A80036" points="713,880.6172,703,884.6172,713,888.6172,709,884.6172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="709" y="851.4185">on alloue une page mémoire</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="709" y="866.5513">pour le processus (type KMEM_TASK)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="928.8828" y2="928.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="928.8828" y2="941.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="941.8828" y2="941.8828"/><polygon fill="#A80036" points="713,937.8828,703,941.8828,713,945.8828,709,941.8828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="709" y="908.6841">on initialise le gestionnaire</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="709" y="923.8169">de signaux du processus</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="986.1484" y2="986.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="986.1484" y2="999.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="999.1484" y2="999.1484"/><polygon fill="#A80036" points="713,995.1484,703,999.1484,713,1003.1484,709,999.1484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="709" y="965.9497">on alloue la mémoire pour la table</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="709" y="981.0825">des threads</text><polygon fill="#A80036" points="916,1024.1484,926,1028.1484,916,1032.1484,920,1028.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="922" y1="1028.1484" y2="1028.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="709" y="1023.2153">task_fd_init(struct task_s *task)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="928" y="1007.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="935" y="1027.1436">task_fd_init</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="975" x2="1017" y1="1088.7109" y2="1088.7109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1017" x2="1017" y1="1088.7109" y2="1101.7109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="976" x2="1017" y1="1101.7109" y2="1101.7109"/><polygon fill="#A80036" points="986,1097.7109,976,1101.7109,986,1105.7109,982,1101.7109" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="982" y="1068.5122">on fait une allocation mémoire</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="986" y="1083.645">pour une structure fd_info_s (type KMEM_FDINFO)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="975" x2="1017" y1="1161.1094" y2="1161.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1017" x2="1017" y1="1161.1094" y2="1174.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="976" x2="1017" y1="1174.1094" y2="1174.1094"/><polygon fill="#A80036" points="986,1170.1094,976,1174.1094,986,1178.1094,982,1174.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="982" y="1125.7778">on fait une allocation mémoire</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="323" x="982" y="1140.9106">(type KMEM_PAGE) pour la tables des descripteurs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="982" y="1156.0435">de fichiers ouverts et la table des pages</text><polygon fill="#A80036" points="713,1184.1094,703,1188.1094,713,1192.1094,709,1188.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="707" x2="974" y1="1188.1094" y2="1188.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="1232.375" y2="1232.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="1232.375" y2="1245.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="1245.375" y2="1245.375"/><polygon fill="#A80036" points="713,1241.375,703,1245.375,713,1249.375,709,1245.375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="709" y="1212.1763">on met tout la région virtuelle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="709" y="1227.3091">du processus à 0</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="1304.7734" y2="1304.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="1304.7734" y2="1317.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="1317.7734" y2="1317.7734"/><polygon fill="#A80036" points="713,1313.7734,703,1317.7734,713,1321.7734,709,1317.7734" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="709" y="1269.4419">on rempli les champs du processus:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="709" y="1284.5747">pid, cluster, cpu, nombre de threads,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="709" y="1299.7075">état courant, etc...</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="744" y1="1392.3047" y2="1392.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744" x2="744" y1="1392.3047" y2="1405.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="703" x2="744" y1="1405.3047" y2="1405.3047"/><polygon fill="#A80036" points="713,1401.3047,703,1405.3047,713,1409.3047,709,1405.3047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="709" y="1341.8403">on met dans le tableau du gestionnaire</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="709" y="1356.9731">de tâches la nouvelle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="709" y="1372.106">tâche (le tableau est indexé par le pid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="709" y="1387.2388">des tâches)</text><polygon fill="#A80036" points="352,1415.3047,342,1419.3047,352,1423.3047,348,1419.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="346" x2="701" y1="1419.3047" y2="1419.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="1463.5703" y2="1463.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="1463.5703" y2="1476.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="1476.5703" y2="1476.5703"/><polygon fill="#A80036" points="352,1472.5703,342,1476.5703,352,1480.5703,348,1476.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="348" y="1443.3716">on alloue une page sur le cluster élu</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="348" y="1458.5044">lors du placement</text><polygon fill="#A80036" points="1259.5,1516.5703,1269.5,1520.5703,1259.5,1524.5703,1263.5,1520.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="1265.5" y1="1520.5703" y2="1520.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="348" y="1500.6372">task_dup(struct task_s *child,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="348" y="1515.77">struct task_s *father)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="1271.5" y="1484.5703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="1278.5" y="1504.5654">task_dup</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1312" x2="1354" y1="1551" y2="1551"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1354" x2="1354" y1="1551" y2="1564"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1313" x2="1354" y1="1564" y2="1564"/><polygon fill="#A80036" points="1323,1560,1313,1564,1323,1568,1319,1564" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="1319" y="1545.9341">on bloque le CWD du père</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1312" x2="1354" y1="1608.2656" y2="1608.2656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1354" x2="1354" y1="1608.2656" y2="1621.2656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1313" x2="1354" y1="1621.2656" y2="1621.2656"/><polygon fill="#A80036" points="1323,1617.2656,1313,1621.2656,1323,1625.2656,1319,1621.2656" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="1319" y="1588.0669">on ajoute 1 aux compteur de références</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="1319" y="1603.1997">des fichiers représentant le cwd et la racine</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1312" x2="1354" y1="1650.3984" y2="1650.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1354" x2="1354" y1="1650.3984" y2="1663.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1313" x2="1354" y1="1663.3984" y2="1663.3984"/><polygon fill="#A80036" points="1323,1659.3984,1313,1663.3984,1323,1667.3984,1319,1663.3984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="365" x="1319" y="1645.3325">on fait pointer child-&gt;cwd et child-&gt;root sur ceux du père</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1312" x2="1354" y1="1692.5313" y2="1692.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1354" x2="1354" y1="1692.5313" y2="1705.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1313" x2="1354" y1="1705.5313" y2="1705.5313"/><polygon fill="#A80036" points="1323,1701.5313,1313,1705.5313,1323,1709.5313,1319,1705.5313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1319" y="1687.4653">on relâche le verrou</text><polygon fill="#A80036" points="1629,1745.5313,1639,1749.5313,1629,1753.5313,1633,1749.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1312" x2="1635" y1="1749.5313" y2="1749.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1319" y="1729.5981">task_fd_fork(struct task_s *child,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1319" y="1744.731">struct task_s *father)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1641" y="1713.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1648" y="1733.5264">task_fd_fork</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1691" x2="1733" y1="1795.0938" y2="1795.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1733" x2="1733" y1="1795.0938" y2="1808.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1692" x2="1733" y1="1808.0938" y2="1808.0938"/><polygon fill="#A80036" points="1702,1804.0938,1692,1808.0938,1702,1812.0938,1698,1808.0938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="1698" y="1774.895">on bloque la structure contenant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1698" y="1790.0278">les descripteurs de fichiers du père</text><rect fill="none" height="188.9297" style="stroke: #000000; stroke-width: 2.0;" width="329" x="1631" y="1823.0938"/><polygon fill="#EEEEEE" points="1631,1823.0938,1708,1823.0938,1708,1830.0938,1698,1840.0938,1631,1840.0938,1631,1823.0938" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="1646" y="1836.1606">loop</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1691" x2="1733" y1="1861.3594" y2="1861.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1733" x2="1733" y1="1861.3594" y2="1874.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1692" x2="1733" y1="1874.3594" y2="1874.3594"/><polygon fill="#A80036" points="1702,1870.3594,1692,1874.3594,1702,1878.3594,1698,1874.3594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="1698" y="1856.2935">récupèrer la struct vfs_file_s du fichier</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1691" x2="1733" y1="1918.625" y2="1918.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1733" x2="1733" y1="1918.625" y2="1931.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1692" x2="1733" y1="1931.625" y2="1931.625"/><polygon fill="#A80036" points="1702,1927.625,1692,1931.625,1702,1935.625,1698,1931.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="1698" y="1898.4263">faire un atomic_add(1) sur le compteur</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1698" y="1913.5591">de référence de ce fichier</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1691" x2="1733" y1="1991.0234" y2="1991.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1733" x2="1733" y1="1991.0234" y2="2004.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1692" x2="1733" y1="2004.0234" y2="2004.0234"/><polygon fill="#A80036" points="1702,2000.0234,1692,2004.0234,1702,2008.0234,1698,2004.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1698" y="1955.6919">mettre la struct vfs_file_s dans la</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1698" y="1970.8247">table des descripteurs de fichiers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1698" y="1985.9575">ouverts du processus fils</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1691" x2="1733" y1="2040.1563" y2="2040.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1733" x2="1733" y1="2040.1563" y2="2053.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1692" x2="1733" y1="2053.1563" y2="2053.1563"/><polygon fill="#A80036" points="1702,2049.1563,1692,2053.1563,1702,2057.1563,1698,2053.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1698" y="2035.0903">on relâche le verrou</text><polygon fill="#A80036" points="1323,2063.1563,1313,2067.1563,1323,2071.1563,1319,2067.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1317" x2="1690" y1="2067.1563" y2="2067.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1312" x2="1354" y1="2111.4219" y2="2111.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1354" x2="1354" y1="2111.4219" y2="2124.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1313" x2="1354" y1="2124.4219" y2="2124.4219"/><polygon fill="#A80036" points="1323,2120.4219,1313,2124.4219,1323,2128.4219,1319,2124.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="1319" y="2091.2231">on met le pointeur du binaire</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="360" x="1319" y="2106.356">du fils sur celui du père (TODO: regarder la variable *bin)</text><polygon fill="#A80036" points="352,2134.4219,342,2138.4219,352,2142.4219,348,2138.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="346" x2="1311" y1="2138.4219" y2="2138.4219"/><rect fill="#EEEEEE" filter="url(#f1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3701" x="3" y="2191.9883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="2191.9883" y2="2191.9883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="2194.9883" y2="2194.9883"/><rect fill="#EEEEEE" filter="url(#f1)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="337" x="1685" y="2181.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="318" x="1691" y="2197.4888">Allocations mémoire (virtuelle et physique)</text><polygon fill="#A80036" points="1900.5,2231.5547,1910.5,2235.5547,1900.5,2239.5547,1904.5,2235.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="1906.5" y1="2235.5547" y2="2235.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="347" x="348" y="2230.6216">vmm_dup(struct vmm_s child-&gt;vmm, current-&gt;vmm)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1912.5" y="2214.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1919.5" y="2234.5498">vmm_dup</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1955" x2="1997" y1="2280.9844" y2="2280.9844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1997" x2="1997" y1="2280.9844" y2="2293.9844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1956" x2="1997" y1="2293.9844" y2="2293.9844"/><polygon fill="#A80036" points="1966,2289.9844,1956,2293.9844,1966,2297.9844,1962,2293.9844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="1962" y="2275.9185">on récupère le thread noyau du cluster élu</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1955" x2="1997" y1="2338.25" y2="2338.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1997" x2="1997" y1="2338.25" y2="2351.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1956" x2="1997" y1="2351.25" y2="2351.25"/><polygon fill="#A80036" points="1966,2347.25,1956,2351.25,1966,2355.25,1962,2351.25" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="1962" y="2318.0513">on demande l'allocation d'une région virtuelle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="1962" y="2333.1841">pour le fils</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1955" x2="1997" y1="2410.6484" y2="2410.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1997" x2="1997" y1="2410.6484" y2="2423.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1956" x2="1997" y1="2423.6484" y2="2423.6484"/><polygon fill="#A80036" points="1966,2419.6484,1956,2423.6484,1966,2427.6484,1962,2423.6484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1962" y="2375.3169">on copie le contenu de la région</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="1962" y="2390.4497">virtuelle du thread noyau dans celle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1962" y="2405.5825">du fils</text><polygon fill="#A80036" points="2207,2448.6484,2217,2452.6484,2207,2456.6484,2211,2452.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1955" x2="2213" y1="2452.6484" y2="2452.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="1962" y="2447.7153">vmm_init(struct vmm_s dst)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="74" x="2219" y="2431.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="2226" y="2451.6436">vmm_init</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2258" x2="2300" y1="2513.2109" y2="2513.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2300" x2="2300" y1="2513.2109" y2="2526.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2259" x2="2300" y1="2526.2109" y2="2526.2109"/><polygon fill="#A80036" points="2269,2522.2109,2259,2526.2109,2269,2530.2109,2265,2526.2109" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="2265" y="2493.0122">toutes les variables composant la vmm</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="2265" y="2508.145">sont mises à zéro</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2258" x2="2300" y1="2555.3438" y2="2555.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2300" x2="2300" y1="2555.3438" y2="2568.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2259" x2="2300" y1="2568.3438" y2="2568.3438"/><polygon fill="#A80036" points="2269,2564.3438,2259,2568.3438,2269,2572.3438,2265,2568.3438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="2265" y="2550.2778">l'arbre des régions virtuelles est mis à NULL</text><polygon fill="#A80036" points="1966,2578.3438,1956,2582.3438,1966,2586.3438,1962,2582.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1960" x2="2257" y1="2582.3438" y2="2582.3438"/><polygon fill="#A80036" points="2500,2622.3438,2510,2626.3438,2500,2630.3438,2504,2626.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1955" x2="2506" y1="2626.3438" y2="2626.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="1962" y="2606.4106">pmm_init(struct pmm_s *pmm,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="1962" y="2621.5435">struct cluster_s *cluster)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="2512" y="2590.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="2519" y="2610.3389">pmm_init</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2552" x2="2594" y1="2702.1719" y2="2702.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2594" x2="2594" y1="2702.1719" y2="2715.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2553" x2="2594" y1="2715.1719" y2="2715.1719"/><polygon fill="#A80036" points="2563,2711.1719,2553,2715.1719,2563,2719.1719,2559,2715.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="2559" y="2651.7075">on copie le contenu de la partie noyau de la</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="2559" y="2666.8403">table des pages dans le processus fils</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="344" x="2559" y="2681.9731">(cela permet au processus de savoir ou sauter en cas</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="2559" y="2697.106">d'appel système)</text><rect fill="none" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="280" x="2502" y="2730.1719"/><polygon fill="#EEEEEE" points="2502,2730.1719,2579,2730.1719,2579,2737.1719,2569,2747.1719,2502,2747.1719,2502,2730.1719" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="2517" y="2743.2388">loop</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2552" x2="2594" y1="2768.4375" y2="2768.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2594" x2="2594" y1="2768.4375" y2="2781.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2553" x2="2594" y1="2781.4375" y2="2781.4375"/><polygon fill="#A80036" points="2563,2777.4375,2553,2781.4375,2563,2785.4375,2559,2781.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="2559" y="2763.3716">TODO: j'ai pas compris le foreach</text><polygon fill="#A80036" points="1966,2798.4375,1956,2802.4375,1966,2806.4375,1962,2802.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1960" x2="2551" y1="2802.4375" y2="2802.4375"/><polygon fill="#A80036" points="352,2812.4375,342,2816.4375,352,2820.4375,348,2816.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="346" x2="1954" y1="2816.4375" y2="2816.4375"/><rect fill="#EEEEEE" filter="url(#f1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3701" x="3" y="2870.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="2870.0039" y2="2870.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3704" y1="2873.0039" y2="2873.0039"/><rect fill="#EEEEEE" filter="url(#f1)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="403" x="1652" y="2859.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="384" x="1658" y="2875.5044">Allocation du premier thread du nouveau processus</text><polygon fill="#A80036" points="2849.5,2939.5703,2859.5,2943.5703,2849.5,2947.5703,2853.5,2943.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="2855.5" y1="2943.5703" y2="2943.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="348" y="2908.6372">thread_dup(struct task_s *child,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="348" y="2923.77">struct thread_s *child_thread,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="348" y="2938.9028">struct fork_info_t *infos)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="2861.5" y="2906.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="2868.5" y="2926.667">thread_dup</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2910" x2="2952" y1="2973.1016" y2="2973.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2952" x2="2952" y1="2973.1016" y2="2986.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2911" x2="2952" y1="2986.1016" y2="2986.1016"/><polygon fill="#A80036" points="2921,2982.1016,2911,2986.1016,2921,2990.1016,2917,2986.1016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="538" x="2917" y="2968.0356">on met toutes les variables composant un thread à 0 (ou leur valeurs d'initialisation)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2910" x2="2952" y1="3015.2344" y2="3015.2344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2952" x2="2952" y1="3015.2344" y2="3028.2344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2911" x2="2952" y1="3028.2344" y2="3028.2344"/><polygon fill="#A80036" points="2921,3024.2344,2911,3028.2344,2921,3032.2344,2917,3028.2344" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="2917" y="3010.1685">on met l'arbre des régions virtuelles à NULL</text><polygon fill="#A80036" points="352,3038.2344,342,3042.2344,352,3046.2344,348,3042.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="346" x2="2909" y1="3042.2344" y2="3042.2344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="3086.5" y2="3086.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="3086.5" y2="3099.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="3099.5" y2="3099.5"/><polygon fill="#A80036" points="352,3095.5,342,3099.5,352,3103.5,348,3099.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="348" y="3066.3013">si il y a des flags à mettre, on les met</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="332" x="348" y="3081.4341">(priorité mémoire, stratégie d'allocation mémoire...)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="3128.6328" y2="3128.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="3128.6328" y2="3141.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="3141.6328" y2="3141.6328"/><polygon fill="#A80036" points="352,3137.6328,342,3141.6328,352,3145.6328,348,3141.6328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="347" x="348" y="3123.5669">on ajoute le thread à la liste des threads du processus</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="3201.0313" y2="3201.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="3201.0313" y2="3214.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="3214.0313" y2="3214.0313"/><polygon fill="#A80036" points="352,3210.0313,342,3214.0313,352,3218.0313,348,3214.0313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="297" x="348" y="3165.6997">on met le compteur de référence à 1 et l'autre</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="352" y="3180.8325">compteur on fait ++ (TODO: find the difference</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="348" y="3195.9653">between thoses counters)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="3243.1641" y2="3243.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="3243.1641" y2="3256.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="3256.1641" y2="3256.1641"/><polygon fill="#A80036" points="352,3252.1641,342,3256.1641,352,3260.1641,348,3256.1641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="348" y="3238.0981">on change l'état du processus à READY</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="3300.4297" y2="3300.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="3300.4297" y2="3313.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="3313.4297" y2="3313.4297"/><polygon fill="#A80036" points="352,3309.4297,342,3313.4297,352,3317.4297,348,3313.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="348" y="3280.231">on affecte le pointeur *parent vers la</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="348" y="3295.3638">struct task_s du père</text><polygon fill="#A80036" points="3389.5,3338.4297,3399.5,3342.4297,3389.5,3346.4297,3393.5,3342.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="3395.5" y1="3342.4297" y2="3342.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="348" y="3337.4966">sched_register(struct thread_s *child_thread)</text><rect fill="#FEFECE" filter="url(#f1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="3401.5" y="3321.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="3408.5" y="3341.4248">sched_register</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="3462" x2="3504" y1="3402.9922" y2="3402.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3504" x2="3504" y1="3402.9922" y2="3415.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3463" x2="3504" y1="3415.9922" y2="3415.9922"/><polygon fill="#A80036" points="3473,3411.9922,3463,3415.9922,3473,3419.9922,3469,3415.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="3469" y="3382.7935">on ajoute le thread dans la liste des</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="3469" y="3397.9263">threads ordonnancables</text><polygon fill="#A80036" points="352,3425.9922,342,3429.9922,352,3433.9922,348,3429.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="346" x2="3461" y1="3429.9922" y2="3429.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341" x2="383" y1="3459.125" y2="3459.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="383" x2="383" y1="3459.125" y2="3472.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="342" x2="383" y1="3472.125" y2="3472.125"/><polygon fill="#A80036" points="352,3468.125,342,3472.125,352,3476.125,348,3472.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="348" y="3454.0591">on initialise le contexte sur le cpu</text><polygon fill="#A80036" points="96,3482.125,86,3486.125,96,3490.125,92,3486.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="90" x2="340" y1="3486.125" y2="3486.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="3515.2578" y2="3515.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="3515.2578" y2="3528.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="3528.2578" y2="3528.2578"/><polygon fill="#A80036" points="96,3524.2578,86,3528.2578,96,3532.2578,92,3528.2578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="92" y="3510.1919">on bloque le processus père</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="3557.3906" y2="3557.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="3557.3906" y2="3570.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="3570.3906" y2="3570.3906"/><polygon fill="#A80036" points="96,3566.3906,86,3570.3906,96,3574.3906,92,3570.3906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="92" y="3552.3247">on lui ajoute sa tâche fils dans sa liste</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="127" y1="3599.5234" y2="3599.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127" x2="127" y1="3599.5234" y2="3612.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86" x2="127" y1="3612.5234" y2="3612.5234"/><polygon fill="#A80036" points="96,3608.5234,86,3612.5234,96,3616.5234,92,3612.5234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="92" y="3594.4575">on débloque le processus père</text><polygon fill="#A80036" points="34,3622.5234,24,3626.5234,34,3630.5234,30,3626.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="28" x2="84" y1="3626.5234" y2="3626.5234"/></g></svg>